<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button text="" icon="arrow-back-outline"></ion-back-button>
        </ion-buttons>
        <ion-title *ngIf="!livreUpdate" color="primary" class="pLR50">{{livreNom}}</ion-title>
        <div *ngIf="livreUpdate">
            <ion-title>
                <ion-input placeholder="{{livreNom}}" type="text" [(ngModel)]="newNom" name="title"></ion-input>
            </ion-title>
        </div>
        <ion-buttons slot="end" *ngIf="!showButtonUpdate">
            <ion-icon icon="pencil" (click)="showUpdateLivre()"></ion-icon>
        </ion-buttons>
        <ion-buttons slot="end" *ngIf="showButtonUpdate">
            <ion-icon icon="arrow-redo-outline" (click)="updateLivre(livre.key)"></ion-icon>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-list>
        <ion-item-group *ngFor="let fiche of newFtByLivre | keyvalue; let i = index">
            <ion-item-divider (click)="fiche.toggle=!fiche.toggle">
                <ion-label>{{fiche.key}}</ion-label>
                <ion-icon slot="end" [name]="fiche.toggle ? 'chevron-down-outline' : 'chevron-forward-outline'">
                </ion-icon>
            </ion-item-divider>
            <div *ngIf="fiche.toggle">
                <ion-row *ngFor="let value of fiche.value; let i = index ">
                    <ion-col>
                        <ion-item>
                            <ion-icon *ngIf="value.type==='PrÃ©paration'" slot="start"
                                src="../../../../assets/icon/icon-prep.svg" (click)="openFiche(value.idFiche, value.type)"></ion-icon>
                            <ion-icon *ngIf="value.type==='Plat'" slot="start"
                                src="../../../../assets/icon/icon-plat.svg" (click)="openFiche(value.idFiche, value.type)"></ion-icon>
                            <ion-label class="text" (click)="openFiche(value.idFiche, value.type)">
                                <h2 class="ficheElementTable">{{value.nom}}</h2>
                                <p> {{value.livre}}</p>
                            </ion-label>
                            <ion-icon slot="end" name="ellipsis-vertical-outline" (click)="openPopover($event, value.idFiche, value.type)"></ion-icon>
                        </ion-item>
                    </ion-col>
                </ion-row>
            </div>
        </ion-item-group>
    </ion-list>
</ion-content>